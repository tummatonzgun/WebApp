{% extends "base.html" %}
{% block title %}‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• - IE Function Portal{% endblock %}
{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}">
{% endblock %}
{% block content %}
    <div class="main-container">
        <div class="header">
            <i class="fas fa-chart-line icon"></i>
            <h1>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•</h1>
            <p>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        </div>

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class="alert-messages">
              {% for message in messages %}
                <div class="alert">
                  <i class="fas fa-info-circle"></i> {{ message }}
                </div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <!-- Statistics Cards -->
        <div class="stats-grid" id="statsGrid">
            <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
        </div>

        <div class="navigation">
            <a href="{{ url_for('index') }}" class="nav-btn">
                <i class="fas fa-home"></i>‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
            </a>
            
            <div class="nav-actions">
                {% if download_link %}
                    <a href="{{ download_link }}" class="download-btn">
                        <i class="fas fa-download"></i>‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Excel
                    </a>
                {% endif %}
                
                <button id="toggleTable" class="nav-btn">
                    <i class="fas fa-table"></i>‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
                </button>
            </div>
        </div>

        <!-- Loading Animation -->
        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <div class="loading-content">
                <i class="fas fa-cog fa-spin"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
            </div>
        </div>

        <!-- Controls Section -->
        <div class="controls-section" id="controlsSection" style="display: none;">
            <div class="controls-header">
                <h3 class="controls-title">
                    <i class="fas fa-filter"></i> ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                </h3>
                <button id="clearFiltersBtn" class="toggle-btn">
                    <i class="fas fa-eraser"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á
                </button>
            </div>
            
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á..." />
            </div>
            
            <div id="dropdownFilters"></div>
        </div>

        <!-- Table Section -->
        <div class="table-section" id="tableSection">
            <div id="tableArea">
                {% if table_html %}
                    {{ table_html|safe }}
                {% else %}
                    <div class="empty-state">
                        <i class="fas fa-table"></i>
                        <h3>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á</h3>
                        <p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•</p>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Modal for Row Details -->
        <div id="detailModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>
{% endblock %}
{% block js %}
    <script src="{{ url_for('static', filename='js/result.js') }}"></script>
{% endblock %}